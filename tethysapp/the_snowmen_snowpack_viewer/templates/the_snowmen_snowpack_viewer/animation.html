{% extends "the_snowmen_snowpack_viewer/base.html" %}
{% load tethys_gizmos %}
{% load staticfiles %}

{% block header_buttons %}
  <div class="header-button glyphicon-button" data-toggle="tooltip" data-placement="bottom" title="Help">
    <a data-toggle="modal" data-target="#help-modal"><span class="glyphicon glyphicon-question-sign"></span></a>
  </div>
{% endblock %}

{% block app_navigation_items %}
{% url 'the_snowmen_snowpack_viewer:home' as home %}
{% url 'the_snowmen_snowpack_viewer:animation' as animation %}
{% url 'the_snowmen_snowpack_viewer:polygontool' as polygontool %}
{% url 'the_snowmen_snowpack_viewer:watershedtool' as watershedtool %}
{% url 'the_snowmen_snowpack_viewer:about' as about %}

<br>
  <li class="{% if request.path == home %}active{% endif %}"><a href="{% url 'the_snowmen_snowpack_viewer:home' %}">Home</a></li>
  <li class="{% if request.path == animation %}active{% endif %}"><a href="{% url 'the_snowmen_snowpack_viewer:animation' %}">Animation</a></li>
  <li class="{% if request.path == polygontool %}active{% endif %}"><a href="{% url 'the_snowmen_snowpack_viewer:polygontool' %}">Polygon Tool</a></li>
  <li class="{% if request.path == watershedtool %}active{% endif %}"><a href="{% url 'the_snowmen_snowpack_viewer:watershedtool' %}">Watershed Tool</a></li>
  <li class="{% if request.path == about %}active{% endif %}"><a href="{% url 'the_snowmen_snowpack_viewer:about' %}">About</a></li>
  <li class="separator"></li>
<br>
<h6><b>Select Display Layers</b></h6>
<p> View Snotel Stations <input type="checkbox" checked="true" id="Snotel_Stations" onClick="showHide();"/> </p>

<br>
{% gizmo select_date %}
{% gizmo view_animation_button %}
<div class="globe" id="waiting_output"></div>
{% endblock %}

{% block app_content %}
  <h1>Snowpack Viewer</h1>
  <div id="showMapView" style="margin:5%; width:1000px; height:700px;"></div>
<br>
  <br>
  <br>
  <br>
  <div id="timeSeriesPlot"></div>
  <br>

{% endblock %}

{# Use the after_app_content block for modals #}
{% block after_app_content %}
  <!-- Example Modal -->
  <div class="modal fade" id="help-modal" tabindex="-1" role="dialog" aria-labelledby="help-modal-label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h5 class="modal-title" id="help-modal-label">Instructions</h5>
        </div>
        <div class="modal-body">
          <p>This map displays the state snow depth rasters for January 2017.  The user can dynamically change the raster layer for each day with the select date tool.  The snowtel stations can be toggeled on an off with the blue checkbox.  When the user clicks on a snotel station, a popup is generated with the station information and a time series of all the available snowdepth date for that station is generated below the map.  A video animation of the rasters for the month of January 2017 can be viewed by clicking the view animation button. </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>

<form id="animationmod" class="modal fade" role="dialog" >
      <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
              <h3 align="center"><b>January 2017 Animation</b></h3>
              <div id="dimtable">


              </div>
              <div align ="center" id="modalbut">
                  <br>
                <iframe align="center" width="500" height="300" src="https://www.youtube.com/embed/RyQ-SHhjfKg?rel=0" frameborder="1" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                <br>
                     <div align="right"  class="close-button" style="margin:5%;">
                     {% gizmo close_modal_button %}
                     </div>
              </div>
          </div>
         <!--End modal content-->
      </div>
  </form>

{% endblock %}

{% block app_actions %}
{% endblock %}

{% block content_dependent_styles %}
  {{ block.super }}
  <link rel="stylesheet" href="https://js.arcgis.com/4.6/esri/css/main.css">
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script src="{% static 'the_snowmen_snowpack_viewer/js/main.js' %}" type="text/javascript"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/export-data.js"></script>
{% endblock %}
